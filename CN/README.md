# 컴퓨터 네트워크

## 1. 컴퓨터 네트워크와 인터넷

### 1.1 인터넷이란 무엇인가?

#### 1.1.1 구성요소로 본 인터넷

- **호스트(host), 종단 시스템(end system)**
    - 컴퓨터 네트워크에 연결된 컴퓨팅 장치
    - 통신 링크와 패킷 스위치의 네트워크로 연결됨
- **통신 링크(communication link)**
    - 동축케이블, 광케이블, 구리선, 전파, 위성을 포함한 다양한 물리 매체로 구성됨
    - 다양한 ***전송률(transmission rate, 링크 대역폭)*** 로 **데이터(패킷)** 전송
        - 전송률은 bps(bit per second) 단위 사용
    - 송신 종단 시스템 -(데이터)-> 수신 종단 시스템
        - 송신 종단 시스템은 데이터를 세그먼트(segment)로 나누고 그 세그먼트에 헤더(header)를 붙임
        - 이렇게 만들어진 정보 패키지를 **패킷(packet)** 이라 부름
        - 패킷은 목적지에서 원래의 데이터로 다시 조립됨
- **패킷 스위치(packet switch)**
    - 패킷 전달
    - 라우터(router), 스위치(switch)
    - 패킷이 송신 종단 시스템에서 수신 종단 시스템에 도달하는 동안 거쳐 온 일련의 통신 링크와 패킷 스위치들을 네트워크상의 **경로(route 혹은 path)** 라고 함
- **ISP(Internet Service Provider)**
    - 인터넷 서비스 제공자
    - 가정 ISP, 법인 ISP, 대학 ISP, 와이파이 접근을 제공하는 ISP, 모바일 접속을 제공하는 셀룰러 데이터 ISP
- **인터넷(Internet)**
    - 네트워크들의 네트워크(network of networks)
    - ISP들의 상호연결
- **프로토콜(protocol)**
    - 정보 송수신을 제어
    - TCP(Transmission Control Protocol), IP(Internet Protocol)
- **인터넷 표준(Internet standard)**
    - IETF(Internet Engineering Task Force)에서 개발
    - RFCs(Request for comments): IETF 표준 문서

#### 1.1.2 서비스 측면에서 본 인터넷

- 애플리케이션에 서비스를 제공하는 인프라 구조
    - 이메일, 웹 서핑, 음악 및 영화 스트리밍, SNS, P2P 파일 공유, 위치기반 추천 시스템을 포함하는 모바일 응용
    - 인터넷 애플리케이션은 종단 시스템에서 수행
    - **분산 애플리케이션**: 서로 데이터를 교환하는 많은 종단 시스템을 포함함

- 애플리케이션에 프로그래밍 인터페이스 제공
    - 인터넷에 연결되어 수행되는 프로그램에게 안전하게 데이터 전달
    - 우편 서비스와 유사한 서비스 제공

#### 1.1.3 프로토콜이란 무엇인가?

- 사람 프로토콜
    - 사람이 전달하고자 하는 특정 **메시지**
    - 수신된 응답 메시지나 다른 상황에서 반응하는 특정 **행동**

- 컴퓨터 네트워크 프로토콜
    - 인터넷의 모든 활동을 제어
    - 프로토콜은 통신 개체들 간에 교환되는 메시지 형식과 순서뿐 아니라, 메시지의 송수신과 다른 이벤트에 따른 행동들을 정의

### 1.2 네트워크 가장자리

- 네트워크 요소
    - 네트워크 가장자리(edge)
        - 호스트(=종단 시스템): 클라이언트와 서버
        - 데이터 센터 내의 서버들
    - 네트워크 중심(core)
        - 상호 연결된 라우터
        - 네트워크들의 네트워크
    - 접속 네트워크, 물리 매체
        - 유무선 통신 링크

#### 1.2.1 접속 네트워크(access network)

종단 시스템과 다른 종단 시스템까지의 경로상에 있는 첫 번째 라우터(**가장자리 라우터(edge router)**)에 연결하는 네트워크

- 접속 네트워크 종류
    - 가정 접속 (residential access)
    - 기관 접속 (school, company access)
    - 무선 접속 (wireless access)

- 접속 네트워크 고려사항
    - 접속 네트워크 대역폭
    - 공유회선 또는 전용회선

- **DSL(Digital Subscriber Line)**
    - 각 고객의 DSL 모뎀은 지역 전화국의 DSLAM(DSL access multiplexer)과 데이터를 교환하기 위해 **기존 전화 회선** 사용
    - 가정의 DSL 모뎀은 디지털 데이터를 받아서 고주파 신호로 변환, DSLAM에서 디지털 포맷으로 다시 변환됨
    - 데이터는 인터넷 망으로, 음성은 전화망으로 전송

- **케이블 인터넷 접속**
    - 주파수 분할 다중화(frequency division multiplexing)
        - 각 채널들이 서로 다른 주파수 밴드로 전송
    - HFC(Hybrid Fiber Coax) 접속망
        - 광케이블, 동축케이블
    - CTMS(cable modem termination system): DSL 네트워크의 DSLAM과 유사한 기능 제공
    - 케이블과 광섬유 네트워크가 각 가정을 ISP 라우터에 연결
        - 각 가정들이 케이블 헤드엔드까지는 접속 네트워크 공유
            - 케이블과 달리 DSL은 중앙국까지 전용선

- **이더넷(Ethernet)**
    - 일반적으로 회사, 대학 등에서 사용
    - 종단 시스템들은 이더넷 스위치에 연결

- **무선 접속 네트워크(Wireless Access Network)**
    - 공유 무선 접속 네트워크가 종단 시스템을 라우터에 연결
        - base station 또는 access point를 경유
    - 무선 LAN
        - IEEE 802.11 (WiFi)
    - 광역 무선 접속
        - 이동 통신 사업자가 서비스
        - 3G, 4G, 5G
            - LTE

- **물리 매체**
    - 비트
        - 송신기와 수신기 사이에 전달
    - 물리링크
        - 송신기와 수신기 사이를 연결
        - 물리 매체 상에 전자파나 광 펄스를 전파하여 전송
    - 유도 매체
        - 견고한 매체를 따라 신호를 유도
        - 광섬유 케이블, 동축 케이블, 꼬임쌍선
    - 비유도 매체
        - 야외 공간으로 파형을 전파

    - 꼬임쌍선(Twisted Pair, TP)
        - 1mm 두께의 두 개의 절연 동선이 나선형태로 배열
        - UTP(unshielded twisted pair)
            - LAN에 가장 많이 이용하는 매체

    - 동축 케이블
        - 동심원형태의 두 개의 구리선
        - 베이스밴드(baseband)
            - 케이블 상에 단일 채널
            - 이더넷
        - 브로드밴드(broadband)
            - 케이블 상에 다중 채널
            - HFC
    
    - 광섬유
        - 비트를 나타내는 빛의 파동을 전파
        - 고속 동작
        - 낮은 에러율

    - 라디오 채널
        - 무선의 전자기 스펙트럼으로 신호를 전달
        - 전파 환경과 신호가 전달되는 거리에 많은 영향을 받는다.
            - 신호 반사, 물체 방해, 간섭

### 1.3 네트워크 코어

네트워크 코어는 상호 연결된 라우터들의 연결망(mesh)

#### 1.3.1 패킷 교환

- **패킷 스위칭(packet switching)**
    - 호스트는 애플리케이션 계층의 메시지를 패킷이라 알려진 작은 덩어리로 분할
    - 패킷들은 통신 링크와 패킷 스위치를 거쳐 전송
        - 패킷들은 한 라우터에서 다른 라우터로 **전달(forward)**
    - 각 패킷은 링크의 최대 전송률 속도로 전송

    `패킷 전송 지연(packet transmission delay) = 링크로 L비트를 전송하는데 걸리는 시간 = L(bits)/R(bits/sec)`

- **저장 후 전달(store-and-forward transmission)**
    - L비트의 패킷을 R bps 속도의 링크로 전송하는데 L/R초 걸림
        - 전송률, 전송속도, 용량, 대역폭
    - 다음 링크로 전송하기 전에 **패킷 전부(L비트)가 라우터에 도착해야 함**

- **큐잉 지연(queuing delay)과 패킷 손실(packet loss)**
    - 각 패킷 스위치는 접속된 여러 개의 링크를 갖고 있고, 각 링크에 대해 패킷 스위치는 그 링크로 송신하려는 패킷을 저장하는 *출력 버퍼(출력 큐)* 를 갖고 있음
    - **큐잉 지연**: 그 링크가 다른 패킷을 전송 중일 때, 도착하는 패킷은 큐에 저장되고 출력 링크상 전송되기를 기다림
    - **패킷 손실**: 큐 공간의 크기가 유한하기 때문에, 큐의 메모리가 꽉 차 있는 경우 패킷은 손실됨
    - 입력 링크에 비트가 도착하는 속도가 전송률보다 빠른 경우, 혼잡한 경우

- **라우팅(routing)**
    - source에서 목적지까지의 패킷 경로를 결정
    - 라우팅 알고리즘(=라우팅 프로토콜)
    - 전달(forwarding)
        - 라우터의 입력에서 적절한 라우터 출력으로 패킷을 이동

#### 1.3.2 회선 교환

네트워크 코어 구성 방식은 회선 교환과 패킷 교환 두 가지 방식이 있음

- **회선 교환(Circuit Switching)**
    - 경로상에 필요한 자원(버퍼, 링크 전송률)이 통신 세션 동안 예약
    - 송신자와 수신자 간의 경로에 있는 스위치들이 연결 상태를 유지
    - 송신자와 수신자 간의 전송률 보장
    - 자원이 공유되지 않음
    - 기존의 전화망

- 한 링크는 n개의 회선을 연결
    - 네트워크 자원을 분할(다중화, multiplexing)
        - 각 분할을 호(call)라고 함
    - 자신의 호가 사용되지 않으면 분할된 자원은 쉼(idle)
        - 다른 호와 공유되지 않음

- FDM(Frequency-Division Multiplexing)
    - 주파수-분할 다중화
    - 설정된 연결은 링크의 주파수 스펙트럼을 공유
    - 각 연결에 대해 고정된 주파수 대역이 할당

- TDM(Time-Division Multiplexing)
    - 시-분할 다중화
    - 시간을 일정 주기의 프레임으로 구분하고, 각 프레임은 고정된 수의 시간 슬롯으로 분할
    - 연결 설정 시 하나의 시간 슬롯이 할당

- 자원 낭비 주장...

- 패킷 교환 vs 회선 교환
    - 패킷 교환 성능 우수(간단, 효율적, 보다 적은 비용)

#### 1.3.3 네트워크의 네트워크

글로벌 통과 ISP

다른 새로운 글로벌 ISP

글로벌 ISP 간 상호 연결  
- IXP(Internet Exchange Point)

지역 ISP

콘텐트 제공자 네트워크
- google

오늘날 네트워크의 네트워크는 12개정도의 1-계층 ISP들과 수 십만개의 하위 계층 ISP들로 구성
- 1-계층 ISP(Sprint, AT&T, NTT)는 국가와 국가 간 담당

POP(Point-of-Presence): ISP 간 연결 접점

### 1.4 패킷 교환 네트워크에서의 지연, 손실과 처리율

#### 1.4.1 패킷 교환 네트워크에서의 지연 개요

패킷 지연 유형

- 노드 처리 지연(nodal processing delay)
    - 라우터에서의 처리 지연
    - 패킷 헤더를 조사하고 그 패킷을 어디로 보낼지 결정하는 시간
    - 패킷의 비트 수준 오류를 조사하는데 필요한 시간 포함
    - 일반적으로 < ms
- 큐잉 지연(queuing delay)
    - 패킷이 큐에서 출력 링크로 전송되기를 기다리는 시간
    - 라우터 혼잡 수준에 좌우
        - 이미 큐에 저장된 패킷들 수에 의해 결정
- 전송 지연(transmission delay)
    - 패킷의 모든 비트를 링크로 밀어내는(전송) 데 필요한 시간
    - 저장 후 전달 지연
    - 전송 지연 = L/R
        - L = packet length(bits)
        - R = link bandwidth(bps)
- 전파 지연(propagation delay)
    - 출력 링크에서 다음 라우터까지 전파하는데 필요한 시간
    - 링크의 물리 매체(광섬유, 꼬임쌍선 등)에 좌우
    - 전파 지연 = d/s
        - d = 두 라우터 간 거리
        - s = 매체의 전파 속도

#### 1.4.2 큐잉 지연

- 트래픽 강도(traffic intensity)
    - 큐잉 지연의 정도를 측정
    - La/R
        - R = 전송률, 즉 비트가 큐에서 나가는 비율(bps)
        - L = 패킷 길이
        - a = 패킷이 큐에 도착하는 평균율
        - La = 비트가 패킷에 도착하는 평균율
    - 1보다 커지면 서비스 용량을 초과하여 평균 지연이 무한대로 커짐

#### 1.4.3 종단 간 지연

- Traceroute 진단 프로그램
    - 지정된 목적지 경로에 따라 출발지에서 라우터까지 지연을 측정
    - Windows Traceroute Tool
        - cmd -> tracert 명령어 사용

#### 처리율(throughput)

- 종단 간에 비트가 전송되는 비율(속도, 비트/초)
- 순간적인 처리율
    - 주어진 순간에 전송 비율
    - 파일 수신 시 파일을 수신하는 비율
- 파일 처리율
    - 주어진 시간 동안의 전송 비율
    - 파일의 크기가 F이고 모두 수신하는데 T초 걸리면, 평균 처리율은 F/T 비트/초

